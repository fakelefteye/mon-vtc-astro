---
import Layout from '@/layouts/Layout.astro';

// --- VOS DONNÉES DE TARIFS ---

// ✅ NOUVEAU : Forfaits Aéroports <-> Grenoble mis en avant
const forfaitsAeroportVille = [
    { origin: "Aéroport de Lyon-Saint Exupéry", to: "Grenoble", prix: 239 },
    { origin: "Grenoble", to: "Aéroport de Lyon-Saint Exupéry", prix: 239 },
    { origin: "Aéroport de Grenoble-Isère", to: "Grenoble", prix: 120 },
    { origin: "Grenoble", to: "Aéroport de Grenoble-Isère", prix: 120 },
    { origin: "Aéroport de Genève", to: "Grenoble", prix: 365 },
    { origin: "Grenoble", to: "Aéroport de Genève", prix: 365 },
];

// ✅ RESTAURÉ : Vos listes de stations complètes
const newStations = [
    { destination: "Alpe d'Huez", cp: "38750", lyonPrix: 350, gnbPrix: 250 },
    { destination: "Les Deux Alpes", cp: "38520", lyonPrix: 380, gnbPrix: 280 },
    { destination: "Tignes / Val d'Isère", cp: "73320", lyonPrix: 480, gnbPrix: 520 },
    { destination: "Les Menuires / St. Martin de Belleville", cp: "73440", lyonPrix: 420, gnbPrix: 460 },
    { destination: "Val Thorens / Orelle", cp: "73440", lyonPrix: 450, gnbPrix: 490 },
    { destination: "Méribel / Courchevel", cp: "73120", lyonPrix: 450, gnbPrix: 490 },
    { destination: "Val Cenis", cp: "73480", lyonPrix: 490, gnbPrix: 530 },
    { destination: "La Plagne / Les Arcs", cp: "73700", lyonPrix: 450, gnbPrix: 490 },
    { destination: "Serre Chevalier (Briançon)", cp: "05240", lyonPrix: 450, gnbPrix: 390 },
    { destination: "Montgenèvre", cp: "05100", lyonPrix: 550, gnbPrix: 490 },
    { destination: "Risoul / Vars", cp: "05600", lyonPrix: 550, gnbPrix: 490 },
    { destination: "Chamrousse", cp: "38410", lyonPrix: 250, gnbPrix: 150 },
    { destination: "Saint-François-Longchamp", cp: "73130", lyonPrix: 350, gnbPrix: 390 },
    { destination: "Puy Saint Vincent", cp: "05290", lyonPrix: 490, gnbPrix: 450 },
    { destination: "Les Orres", cp: "05200", lyonPrix: 520, gnbPrix: 490 },
];

const trievesStations = [
    { destination: "Monestier-de-Clermont", cp: "38650", lyonPrix: 320, gnbPrix: 190 },
    { destination: "Sinard", cp: "38650", lyonPrix: 330, gnbPrix: 200 },
    { destination: "Roissard", cp: "38650", lyonPrix: 310, gnbPrix: 180 },
    { destination: "Clelles", cp: "38930", lyonPrix: 340, gnbPrix: 210 },
];

const forfaitsGrenoble = [
    { destination: "La Grave", cp: "05320", prixBerline: 207 }, { destination: "Orcières", cp: "05170", prixBerline: 350 },
    { destination: "Serre Chevalier", cp: "05240", prixBerline: 390 }, { destination: "Alpe d'Huez", cp: "38750", prixBerline: 170 },
    { destination: "Alpe du Grand Serre", cp: "38350", prixBerline: 150 }, { destination: "Auris-en-Oisans", cp: "38142", prixBerline: 185 },
    { destination: "Autrans", cp: "38880", prixBerline: 116 }, { destination: "Chamrousse", cp: "38410", prixBerline: 99 },
    { destination: "Col d'Ornon", cp: "38520", prixBerline: 163 }, { destination: "Col de porte", cp: "38700", prixBerline: 90 },
    { destination: "Gresse-en-Vercors", cp: "38650", prixBerline: 134 }, { destination: "Lans-en-Vercors", cp: "38250", prixBerline: 87 },
    { destination: "Le Collet D'Allevard", cp: "38580", prixBerline: 147 }, { destination: "Le Sappey-en-Chartreuse", cp: "38700", prixBerline: 50 },
    { destination: "Les 7 Laux - Prapoutel", cp: "38190", prixBerline: 106 }, { destination: "Les Deux Alpes", cp: "38520", prixBerline: 180 },
    { destination: "Méaudre", cp: "38112", prixBerline: 120 }, { destination: "Oz-en-Oisans", cp: "38114", prixBerline: 150 },
    { destination: "Saint-Hilaire-du-Touvet", cp: "38660", prixBerline: 76 }, { destination: "Saint-Pierre-de-Chartreuse", cp: "38380", prixBerline: 79 },
    { destination: "Sanctuaire Notre-Dame de la Salette", cp: "38970", prixBerline: 221 }, { destination: "Vaujany", cp: "38114", prixBerline: 154 },
    { destination: "Villard-Reculas", cp: "38114", prixBerline: 160 }, { destination: "Villard-de-Lans", cp: "38250", prixBerline: 108 },
    { destination: "Courchevel", cp: "73120", prixBerline: 317 }
];

// --- TRANSFORMATION DES DONNÉES POUR L'AFFICHAGE ET LE SEO ---
const allAirportStations = [...newStations, ...trievesStations];

// On transforme chaque liste en un format unifié { origin, to, prix }
const forfaitsAeroLyonStations = allAirportStations.map(s => ({ origin: "Aéroport de Lyon-Saint Exupéry", to: s.destination, prix: s.lyonPrix }));
const forfaitsAeroGrenobleStations = allAirportStations.map(s => ({ origin: "Aéroport de Grenoble-Isère", to: s.destination, prix: s.gnbPrix }));
const forfaitsGrenobleVilleStations = forfaitsGrenoble.map(s => ({ origin: "Grenoble", to: s.destination, prix: s.prixBerline }));

// On fusionne toutes les listes pour le tableau et le SEO
const allForfaits = [
    ...forfaitsAeroportVille, 
    ...forfaitsAeroLyonStations, 
    ...forfaitsAeroGrenobleStations, 
    ...forfaitsGrenobleVilleStations
].sort((a,b) => `${a.origin} ${a.to}`.localeCompare(`${b.origin} ${b.to}`));


// --- GÉNÉRATION DES MÉTADONNÉES SEO ---
const generateSchema = (forfaits) => {
  return forfaits.map(forfait => ({
    "@context": "https://schema.org",
    "@type": "Service",
    "name": `Transfert VTC ${forfait.origin} ↔ ${forfait.to}`,
    "description": `Trajet en VTC électrique entre ${forfait.origin} et ${forfait.to}. Réservez votre chauffeure privée.`,
    "provider": { "@type": "Organization", "name": "ShipCars VTC Grenoble" },
    "offers": {
      "@type": "Offer",
      "priceCurrency": "EUR",
      "price": forfait.prix.toFixed(2),
      "url": `/#booking?pickup=${encodeURIComponent(forfait.origin)}&dropoff=${encodeURIComponent(forfait.to)}`
    }
  }));
};
const schemaData = generateSchema(allForfaits);
---

<Layout 
    title="Nos Forfaits transferts aéroports | Tarifs Stations de Ski et Aéroports"
    description="Consultez nos tarifs VTC forfaitaires pour les Alpes, le Trièves et les transferts aéroport (Lyon, Genève, Grenoble).">

    <section class="page-hero">
        <div class="container">
            <h1>Nos Tarifs Indicatifs</h1>
            <p class="subtitle">Des prix fixes et transparents pour vos destinations les plus fréquentes.</p>
        </div>
    </section>

    <section class="content-section">
        <div class="container">
            <h2>Transferts Aéroports & Stations</h2>
            <p>Les tarifs ci-dessous sont fixes pour un trajet en berline. Pour toute autre destination ou pour un horaire spécifique, utilisez notre outil de réservation pour un devis instantané.</p>
            
            <div class="table-container">
                <table class="tarifs-table">
                    <thead>
                        <tr>
                            <th>Trajet VTC (Départ ↔ Arrivée)</th>
                            <th>Prix (Berline Électrique)</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {allForfaits.map((forfait) => (
                            <tr>
                                <td data-label="Trajet"><strong>{forfait.origin}</strong> ↔ {forfait.to}</td>
                                <td data-label="Prix" class="prix-cell">{forfait.prix} €</td>
                                <td data-label="Réserver">
                                    <a href={`/#booking`} class="table-cta">
                                        Réserver
                                    </a>
                                </td>
                            </tr>
                        ))}
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <script type="application/ld+json" set:html={JSON.stringify(schemaData)} />
</Layout>

<style>
    :root { --accent: #007bff; }
    .page-hero { background: var(--accent); color: white; padding: 4rem 2rem; text-align: center; }
    .content-section { padding: 4rem 2rem; }
    .container { max-width: 1200px; margin: 0 auto; }
    .table-container { overflow-x: auto; margin-top: 2rem; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); border-radius: 8px; }
    .tarifs-table { width: 100%; border-collapse: collapse; text-align: left; background: white; }
    .tarifs-table th, .tarifs-table td { padding: 15px; border-bottom: 1px solid #eee; }
    .tarifs-table th { background-color: var(--accent); color: white; }
    .prix-cell { font-weight: bold; color: var(--accent); font-size: 1.1em; }
    .table-cta { display: inline-block; padding: 5px 12px; background-color: #f0f0f0; color: var(--accent); text-decoration: none; border-radius: 4px; font-weight: 600; transition: all 0.2s; }
    .table-cta:hover { background-color: var(--accent); color: white; }
     @media (max-width: 768px) {
        .tarifs-table thead { display: none; }
        .tarifs-table, .tarifs-table tbody, .tarifs-table tr, .tarifs-table td { display: block; }
        .tarifs-table tr { border: 1px solid #ddd; margin-bottom: 1rem; }
        .tarifs-table td { padding-left: 50%; text-align: right; position: relative; }
        .tarifs-table td:before { content: attr(data-label); position: absolute; left: 15px; width: 45%; text-align: left; font-weight: bold; }
    }
</style>