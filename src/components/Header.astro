---
// src/components/Header.astro

const { currentPath: rawPath = '' } = Astro.props;
const currentPath = typeof rawPath === 'string' ? rawPath : '';

const isActive = (pathPrefix: string) => {
    // Si c'est la racine et pas un préfixe de langue connu, c'est le français par défaut
    if (pathPrefix === '/') {
        return currentPath === '/' || (!currentPath.startsWith('/en') && !currentPath.startsWith('/es') && currentPath !== '');
    }
    // Pour les autres langues
    return currentPath.startsWith(pathPrefix);
};
---

<header class="header">
    <div class="header-main">
        <a href="/" class="logo">
            <img src="https://pub-d35dc23058ee46aca93fb6f682ad5e37.r2.dev/logo_ship_cars.png" alt="ShipCars Logo">
        </a>
        <nav class="nav">
            <a href="/">Accueil</a>
            <a href="/nos-prestations">Nos Prestations</a>
            <a href="/contact">Contact</a>
        </nav>
        
        <div class="language-picker"> 
            <a href="/" class={isActive('/') ? 'active' : ''} aria-label="Choisir le Français">FR</a> 
            <a href="/en/" class={isActive('/en') ? 'active' : ''} aria-label="Choose English">EN</a> 
            <a href="/es/" class={isActive('/es') ? 'active' : ''} aria-label="Elegir Español">ES</a> 
        </div>
    </div>
</header>

<style>
    .header {
        background-color: var(--dark-bg);
        padding: 1rem 0;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        z-index: 1000;
        position: sticky;
        top: 0;
    }

    .header-main {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 1.5rem;
    }

    .logo img {
        height: 50px;
        width: auto;
    }

    .nav {
        display: flex;
        gap: 2rem;
    }

    .nav a {
        color: white;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s ease;
    }

    .nav a:hover {
        color: var(--accent);
    }

    /* Styles pour le sélecteur de langue (version texte) */
    .language-picker {
        display: flex;
        gap: 0.5rem; /* Réduire l'espacement entre les éléments */
        align-items: center;
        margin-left: 2rem;
    }

    .language-picker a {
        color: white; /* Couleur du texte par défaut */
        background-color: transparent; /* Fond transparent par défaut */
        border: 1px solid rgba(255, 255, 255, 0.4); /* Bordure légère */
        padding: 0.3rem 0.6rem;
        border-radius: 5px;
        text-decoration: none;
        font-size: 0.9em;
        font-weight: bold;
        opacity: 0.7; /* Moins opaque par défaut */
        transition: all 0.3s ease;
        min-width: 35px; /* S'assurer qu'ils ont une taille minimale */
        text-align: center;
    }

    .language-picker a:hover {
        opacity: 1;
        background-color: rgba(255, 255, 255, 0.1); /* Fond légèrement plus visible au survol */
        transform: translateY(-1px);
    }

    .language-picker a.active {
        opacity: 1;
        background-color: var(--accent, #35c2b5); /* Fond de couleur accent pour la langue active */
        border-color: var(--accent, #35c2b5); /* Bordure de la même couleur */
        color: white; /* Texte blanc sur le fond coloré */
        transform: scale(1.05); /* Légèrement plus grand si actif */
        box-shadow: 0 0 10px rgba(53, 194, 181, 0.5); /* Ombre pour l'actif */
    }

    /* Média queries pour la responsivité */
    @media (max-width: 768px) {
        .header-main {
            flex-direction: column;
            gap: 1.5rem;
        }
        .nav {
            order: 2;
        }
        .language-picker {
            order: 1;
            margin-left: 0;
        }
        .logo {
            order: 0;
        }
    }
</style>